#!/usr/bin/env bash

set -Eeuo pipefail

if [ "${DOTFILES_DEBUG:-}" ]; then
    set -x
fi

readonly PACKAGES=(
{{- range .packages.ubuntu.common.apt }}
    {{ . }}
{{- end }}
{{- range default list (get (default (dict "apt" list) (index .packages.ubuntu .system)) "apt") }}
    {{ . }}
{{- end }}
)

function install_apt_packages() {
    sudo apt-get install -y "${PACKAGES[@]}"
}

function uninstall_apt_packages() {
    sudo apt-get remove -y "${PACKAGES[@]}"
}

function main() {
    install_apt_packages
}

if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
    main
fi